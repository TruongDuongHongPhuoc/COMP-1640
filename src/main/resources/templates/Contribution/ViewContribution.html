<!-- ViewFalcutlty.html -->
<!DOCTYPE html>
<html lang="en"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="Layout/_Admin">

<body>
<div layout:fragment="content">
    <h1>Contribution management</h1>
    <form action="/Contribution/downloadmethod" method="get">
       <div th:if="${!dateCheck}">
           <button type="submit" class="btn btn-success">Download Selected</button>
       </div>
        <div th:if="${dateCheck}">
            <button class="btn btn-secondary">The academic year hasn't ended yet</button>
        </div>
        <div id="layoutSidenav_content">
            <main>
                <div class="container-fluid px-4">
                    <div class="card mb-4">
                        <div class="card-header">
                            <i class="fas fa-table me-1"></i>
                            DataTable Example
                            <label for="facultyFilter">Filter by Faculty:</label>
                            <select class="form-select" id="facultyFilter">
                                <option value="">All Faculties</option>
                                <!-- Iterate over the list of faculties -->
                                <th:block th:each="fa : ${faculties}">
                                    <option th:value="${fa.id}" th:text="${fa.name}"></option>
                                </th:block>
                            </select>
                        </div>
                        <div>
                            <div>
                                <button type="button" id="selectAllButton" class="btn btn-primary">Select All</button>

                            </div>
                            <div class="card-body">
                                <table id="datatablesSimple">
                                    <thead>
                                    <tr>
                                        <th>select
                                        </th>

                                        <th>Name</th>
                                        <th>Description</th>
                                        <th>Submitedate</th>
                                        <th>Status</th>
                                        <th>Academicyear</th>
                                        <th>Facultyid</th>
                                        <th>Download</th>
                                        <th>SetPublic</th>
                                        <th>View Feedback</th>
                                        <th:Block th:if="${acc.getRoleId().equals('1')}">
                                        <th>Delete</th>
                                        </th:Block>
                                    </tr>
                                    </thead>
                                    <tfoot>
                                    <tr>
                                        <th>select</th>
                                        <th>Name</th>
                                        <th>Description</th>
                                        <th>Submitedate</th>
                                        <th>Status</th>
                                        <th>Academicyear</th>
                                        <th>Facultyid</th>
                                        <th>Download</th>
                                        <th>SetPublic</th>
                                        <th>View Feedback</th>
                                        <th:Block th:if="${acc.getRoleId().equals('1')}">
                                        <th>Delete</th>
                                        </th:Block>
                                    </tr>
                                    </tfoot>
                                    <tbody>
                                    <th:block th:each="fal:${cons}">
                                        <tr>
                                            <td>
                                                <input type="checkbox" th:id="${fal.id}" th:name="selectedFiles"
                                                       th:value="${fal.getPath()}"/>
                                            </td>
                                            <td th:text="${fal.name}"></td>
                                            <td th:text="${fal.description}"></td>
                                            <td th:text="${fal.submitDate}"></td>
                                            <td th:text="${fal.status == 0 ? 'Waiting' : (fal.status == 1 ? 'Approved' : (fal.status == 3 ? 'Public' : 'Rejected'))}"></td>
                                            <td th:text="${fal.academicYearId}"></td>
                                            <td th:text="${fal.facultyId}"></td>
                                            <td>
                                                <a th:href="@{http://localhost:8090/Fi/files/__${fal.path}__}">Download</a>
                                            </td>
                                            <td>
                                                <a th:href="@{/Contribution/SetPublic/{id}(id = ${fal.getId()})}">SetPublic</a>
                                            </td>
                                            <td>
                                                <a th:href="@{/FeedBack/ViewFeedback/{id}(id = ${fal.getId()})}">View Feedback</a>
                                            </td>
                                            <th:Block th:if="${acc.getRoleId().equals('1')}">
                                            <td>
                                                <form th:action="@{/Contribution/DeleteForAdmin}" method="Post">
                                                    <input type="hidden" name="id" th:value="${fal.getId()}">
                                                    <button class="btn btn-primary">Delete Method</button>
                                                </form>
                                            </td>
                                            </th:Block>
                                        </tr>
                                    </th:block>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </form>
</body>
</html>