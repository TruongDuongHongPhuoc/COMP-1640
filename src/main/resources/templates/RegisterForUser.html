<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">

<head>
    <link rel="icon" href="https://think.edu.vn/wp-content/uploads/2020/05/University-of-Greenwich.jpg"
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GNDQ069VVF"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-GNDQ069VVF');
    </script>

    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-NJXG26NL');</script>
    <!-- End Google Tag Manager -->

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Register page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJXG26NL" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <section class="vh-100">
        <div class="container py-5 h-100">
            <div class="row d-flex align-items-center justify-content-center h-100">
                <div class="col-md-8 col-lg-7 col-xl-6">
                    <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.svg"
                        class="img-fluid" alt="Phone image">
                </div>
                <div class="col-md-7 col-lg-5 col-xl-5 offset-xl-1">
                    <h1>Sign up</h1>
                    <form th:action="@{/register}" id="registerForm" method="post" th:object="${account}"
                        enctype="multipart/form-data">
                        <!-- Fullname input -->
                        <div class="form-outline mb-4">
                            <label class="form-label" for="form1Example9">Fullname</label>
                            <input th:field="*{name}" id="form1Example9" type="text" name="name"
                                class="form-control form-control-lg" />
                        </div>
                        <div th:if="${#fields.hasErrors('mail')}" class="alert alert-danger">
                            <p th:errors="*{mail}" style="color: red"></p>
                        </div>
                        <!-- Email input -->
                        <div class="form-outline mb-4">
                            <label class="form-label" for="form1Example13">Email address</label>
                            <input th:field="*{mail}" type="email" name="email" id="form1Example13"
                                class="form-control form-control-lg" />
                        </div>

                        <!-- Date input -->
                        <div class="form-outline mb-4">
                            <label class="form-label" for="form1Example18">Date of birth</label>
                            <input th:field="*{dateOfBirth}" type="date" name="date" id="form1Example18"
                                class="form-control form-control-lg" />
                        </div>

                        <!-- Address input -->
                        <div class="form-outline mb-4">
                            <label class="form-label" for="form1Example17">Address</label>
                            <input th:field="*{address}" type="text" name="address" id="form1Example17"
                                class="form-control form-control-lg" />
                        </div>

                        <!-- Address input -->
                        <div class="form-outline mb-4">
                            <label class="form-label" for="form1Example16">Phone</label>
                            <input th:field="*{phoneNumber}" type="text" name="phone" id="form1Example16"
                                class="form-control form-control-lg" />
                        </div>

                        <!-- Image input -->
                        <div class="form-outline mb-4">
                            <label class="form-label" for="form1Example11">Avatar</label>
                            <input type="file" name="image" accept="image/*" id="form1Example11"
                                class="form-control form-control-lg" />
                        </div>

                        <!-- Faculty input -->
                        <div class="form-outline mb-4">
                            <label class="form-label" for="form1Example12">Falcuty</label>
                            <select th:field="*{facultyId}" id="form1Example12" class="form-select form-select-lg">
                                <option th:each="option : ${facultyList}" th:value="${option.getId()}"
                                    th:text="${option.getName()}"></option>
                            </select>
                        </div>

                        <!-- Password input -->
                        <div class="form-outline mb-4">
                            <label class="form-label" for="form1Example23">Password</label>
                            <input th:field="*{password}" type="password" name="password" id="form1Example23"
                                class="form-control form-control-lg" />
                        </div>
                        <input th:field="*{roleId}" type="hidden" value="2" name="role">
                        <div class="d-flex justify-content-around align-items-center mb-4">
                            <!-- Checkbox -->
                            <!--                        <div class="form-check">-->
                            <!--                            <input class="form-check-input" type="checkbox" value="" id="form1Example3" checked />-->
                            <!--                            <label class="form-check-label" for="form1Example3"> Remember me </label>-->
                            <!--                        </div>-->
                            <a th:href="@{/login}">Already have an account, log in.</a>
                            <!--                        <a href="#!">Forgot password?</a>-->
                        </div>
                        <!-- Submit button -->
                        <button type="submit" class="btn btn-primary btn-lg btn-block">Register</button>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
    <script>
        document.getElementById('registerForm').addEventListener('submit', function (event) {
            var form = event.target;
            var inputs = form.querySelectorAll('input, select');
            var isFormValid = true;

            var phoneRegex = /^\d{10}$/; // Biểu thức chính quy kiểm tra số điện thoại (10 chữ số)
            var passwordRegex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/; // Biểu thức chính quy kiểm tra mật khẩu (ít nhất 8 ký tự, bao gồm ít nhất một chữ cái viết thường, một chữ cái viết hoa và một số)

            for (var i = 0; i < inputs.length; i++) {
                var input = inputs[i];

                // Kiểm tra nếu trường không được nhập
                if (!input.value.trim() && !input.name.equals("role")) {
                    isFormValid = false;
                    break;
                }

                // Kiểm tra số điện thoại
                if (input.name === 'phone' && !phoneRegex.test(input.value.trim())) {
                    isFormValid = false;
                    break;
                }

                // Kiểm tra mật khẩu
                if (input.name === 'password' && !passwordRegex.test(input.value.trim())) {
                    isFormValid = false;
                    break;
                }
            }

            // Nếu biểu mẫu không hợp lệ, hiển thị thông báo
            if (!isFormValid) {
                event.preventDefault(); // Ngăn biểu mẫu được gửi đi

                // Hiển thị hộp thoại cảnh báo
                alert('your information is not Correct Please Try Again.');
            }
        });
    </script>
</body>

</html>