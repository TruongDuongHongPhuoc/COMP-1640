<!DOCTYPE html>
<html>
<head>
    <title>Real-time Google Analytics Report</title>
    <!-- Load the Google Analytics Data API client library -->
    <script src="https://apis.google.com/js/api.js"></script>
    <script>
        function handleClientLoad() {
            // Load the API client and authenticate the user
            gapi.load('client:auth2', initClient);
        }

        function initClient() {
            // Initialize the API client with your API key
            gapi.client.init({
                'apiKey': 'AIzaSyArPUJftrB7y-Lg8GM1cHN67k9Uj18KT68', // Replace with your API key
                'discoveryDocs': ['https://analyticsdata.googleapis.com/$discovery/rest'],
            }).then(function() {
                // After initializing, call the function to fetch real-time data
                fetchRealTimeData();
            });
        }

        function fetchRealTimeData() {
            // Create a request to fetch real-time data
            var request = {
                'property': 'properties/434690086', // Replace with your GA4 property ID
                'metrics': [{'name': 'activeUsers'}], // Metric for active users
            };

            // Send the request to the Real-time API
            gapi.client.analyticsdata.properties.realtime.report(request).then(function(response) {
                // Handle the response and display the real-time data
                var activeUsers = response.result.rows[0].metricValues[0].value;
                document.getElementById('realtimeData').innerText = activeUsers;
            }, function(error) {
                console.error('Error fetching real-time data:', error);
            });
        }
    </script>
</head>
<body>
    <h1>Real-time Google Analytics Report</h1>
    <p>Active Users: <span id="realtimeData"></span></p>
</body>
</html>
